<div class="container">
  <div class="text-center row mt-4 mb-2">
    <div class="col">
      <div (pageShow)="ngOnInit()">
        <h2 class=" font-weight-bold ">{{ 'create-team.1' | translate }}</h2>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <form ngNativeValidate class="needs-validation" #editTeamForm="ngForm">
        <div class="form-group row">
          <div class="col-md-6">
            <label for="teamname" class="font-weight-bold"
              ><span>{{ 'edit-team.2' | translate }}</span></label
            >
            <input
              class="form-control"
              id="teamname"
              name="teamname"
              [(ngModel)]="name"
              required
            />
          </div>
        </div>
        <div class="form-group row">
          <div class="col-md-6">
            <label for="challengeDescription" class="font-weight-bold"
              ><span>{{ 'edit-team.3' | translate }}</span></label
            >
            <textarea
              class="form-control"
              rows="3"
              id="challengeDescription"
              [(ngModel)]="description"
              name="challengeDescription"
            ></textarea>
          </div>
        </div>
        <div class="form-group row">
          <div class="col-md-6">
            <label for="minigameSelection" class="font-weight-bold"
              ><span>Mini Game Category</span></label
            >
            <div class="dropdown">
              <button
                class="btn btn-secondary dropdown-toggle"
                type="button"
                id="dropdownMenuButton"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                {{
                  selectedMiniGameCategory?.categoryName == undefined
                    ? 'Select Category'
                    : selectedMiniGameCategory.categoryName
                }}
              </button>
              <div
                class="dropdown-menu overflow-auto"
                aria-labelledby="dropdownMenuButton"
              >
                <div *ngFor="let miniGameCategory of MiniGameCategories">
                  <h6 class="dropdown-header">{{ miniGameCategory }}</h6>
                  <a
                    class="dropdown-item"
                    (click)="selectMiniGameCategory(category)"
                    *ngFor="let category of MiniGamesObject[miniGameCategory]"
                    >{{ category.categoryName }}</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row">
          <div class="col-md-6">
            <label for="minigameSelection" class="font-weight-bold"
              ><span>Mini Game</span></label
            >
            <select
              #minigameDropdown
              id="minigameSelection"
              class="float-right form-control"
            >
              <option
                *ngFor="let minigame of minigames"
                value="{{ minigame.id }}"
                [selected]="minigame.id == currentMinigame"
              >
                {{ minigame.name }}
              </option>
            </select>
            <button (click)="changeMinigame(minigameDropdown.value)">
              Set
            </button>
          </div>
        </div>
        <div class="form-group row" *ngFor="let variable of minigameVariables">
          <div class="col-md-6">
            <label for="{{ variable.name }}" class="font-weight-bold">{{
              variable.name
            }}</label>
            <input
              id="{{ variable.name }}"
              [(ngModel)]="variable.value"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        </div>
        <div class="form-group row">
          <ul class="nav nav-tabs" id="challengePages" role="tablist">
            <li class="nav-item">
              <a
                class="nav-link  active"
                data-toggle="list"
                href="#pageBeforeChallenge"
                role="tab"
                >Before</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                data-toggle="list"
                href="#pageAfterChallenge"
                role="tab"
                >After</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="list" href="#snap" role="tab"
                >Snap</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                data-toggle="list"
                href="#brainstormcanvas"
                role="tab"
                >Brainstorm canvas</a
              >
            </li>
          </ul>

          <div class="tab-content">
            <div
              class="tab-pane fade show active"
              id="pageBeforeChallenge"
              role="tabpanel"
            >
              <quill-editor
                [styles]="{ height: '500px' }"
                [format]="'object'"
                [(ngModel)]="htmlBefore"
                name="pageBeforeChallengeQuill"
                [modules]="quillModules"
              ></quill-editor>
            </div>
            <div class="tab-pane fade" id="pageAfterChallenge" role="tabpanel">
              <quill-editor
                [styles]="{ height: '500px' }"
                [format]="'object'"
                [(ngModel)]="htmlAfter"
                [modules]="quillModules"
                name="pageBeforeChallengeQuill"
              ></quill-editor>
            </div>

            <div class="tab-pane fade" id="snap" role="tabpanel">
              <div class="row">
                <iframe
                  src="/assets/snap/snap.html"
                  width="1200"
                  height="1000"
                ></iframe>
              </div>
            </div>
            <div class="tab-pane fade" id="brainstormcanvas" role="tabpanel">
              <div class="row">
                <app-canvas [canAddNotes]="true"></app-canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="btn-group mb-4" role="group">
          <button
            class="btn btn-success"
            type="submit"
            (click)="this.mode == 'edit' ? editTeam() : createTeam()"
          >
            <span>{{ 'edit-team.10' | translate }}</span>
          </button>
          <button class="btn btn-danger" (click)="goBack()">
            <span>{{ 'create-team.11' | translate }}</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
